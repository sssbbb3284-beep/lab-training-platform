<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Prototype</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
/* إعدادات أساسية للصفحة */
body {
  margin:0;
  padding:0;
  height:100dvh;
  width:100vw;
  background-color:#001f3f;
  font-family:Arial, sans-serif;
  overflow:hidden;
  position:relative;
}
/*شعار الخلفيه */
body::before {
  content:"";
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:300px;
  height:300px;
  background-image:url('logo.png');
  background-size:contain;
  background-repeat:no-repeat;
  opacity:0.1;
  z-index:1;
}
/* الكتابه 1 في الصفحه الرئيسيه */
.welcome {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  color:white;
  z-index:2;
  width:90%;
}
.welcome h1 { font-size:50px;margin-bottom:20px; }
.welcome p { font-size:20px;margin-bottom:40px; }
/* زر البداية */
#startBtn {
  padding:15px 50px;
  font-size:22px;
  background-color:#ffffff;
  color:#001f3f;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
#startBtn:hover { background-color:#ddd; }

/* زر التالي */
#nextBtn {
  display:none;
  position:absolute;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
  z-index:5;
  transition:0.2s;
}

/* الفيديوهات */
video {
  width:100%;
  height:100%;
  object-fit:contain;
  display:none;
  position:absolute;
  top:0;
  left:0;
  z-index:2;
  outline:none;
}
video::-webkit-media-controls { display:none !important; }

/* السؤال */
.questionBar {
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  background-color:rgba(0,0,0,0.85);
  color:white;
  padding:15px;
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:5;
  text-align:center;
  display:none;
}
.questionBar button {
  margin:0 15px;
  padding:10px 25px;
  font-size:16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

/* شريط الحالة */
.statusBar {
  position:absolute;
  top:10px;
  left:10px;
  right:10px;
  display:flex;
  justify-content:space-between;
  padding:8px 15px;
  background-color:rgba(0,0,0,0.7);
  color:white;
  border-radius:8px;
  font-size:16px;
  z-index:6;
  display:none;
}

/* مربع التنبيه */
.alertBox {
  position:absolute;
  top:0; left:0;
  width:100%;
  height:100%;
  background-color:rgba(0,0,0,0.85);
  color:white;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:10;
  text-align:center;
}
.alertBox button {
  margin-top:20px;
  padding:10px 30px;
  font-size:18px;
  cursor:pointer;
  border-radius:8px;
  border:none;
}
</style>
</head>
<body>

<!-- الصفحة الرئيسية -->
<div class="welcome" id="welcome">
  <h1>Laboratory simulation</h1>
  <p>This is an interactive training platform for medical laboratory students.</p>
  <button id="startBtn">START</button>
</div>

<!-- زر التالي -->
<button id="nextBtn"></button>

<!-- شريط السؤال -->
<div class="questionBar" id="questionBar">
  <span>Do you accept samples?</span>
  <button id="yesBtn">Yes</button>
  <button id="noBtn">No</button>
</div>

<!-- شريط الحالة -->
<div class="statusBar" id="statusBar">
  <span id="points">100</span>
  <span id="status">case 1</span>
</div>

<!-- مربع التنبيه -->
<div class="alertBox" id="alertBox">
  <h2 id="alertMsg"></h2>
  <button id="alertBtn">continuation</button>
</div>

<!-- الفيديوهات -->
<div id="phases">
  <!-- Phase 1 -->
  <video class="phase1" src="A.mp4"></video>
  <video class="phase1" src="B.mp4"></video>
  <video class="phase1" src="C.mp4"></video>
  <video class="phase1" src="D.mp4"></video>
  <video class="phase1" src="E.mp4"></video>
  <video class="phase1" src="F.mp4"></video>
  <video class="phase1" src="G.mp4"></video>

  <!-- Phase 2 -->
  <video class="phase2" src="A.mp4"></video>
  <video class="phase2" src="B.mp4"></video>
  <video class="phase2" src="C.mp4"></video>
  <video class="phase2" src="D.mp4"></video>
  <video class="phase2" src="E.mp4"></video>
  <video class="phase2" src="F.mp4"></video>
  <video class="phase2" src="P.mp4"></video>
</div>

<script>
/* عناصر الصفحة */
const startBtn = document.getElementById("startBtn");
const welcome = document.getElementById("welcome");
const nextBtn = document.getElementById("nextBtn");
const questionBar = document.getElementById("questionBar");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const statusBar = document.getElementById("statusBar");
const pointsEl = document.getElementById("points");
const statusEl = document.getElementById("status");
const alertBox = document.getElementById("alertBox");
const alertMsg = document.getElementById("alertMsg");
const alertBtn = document.getElementById("alertBtn");

let currentPhase = 0;
let currentVideoIndex = 0;
let totalPoints = 100;
let phaseEnded = false;

/* تجميع الفيديوهات */
const phases = [
  Array.from(document.querySelectorAll(".phase1")),
  Array.from(document.querySelectorAll(".phase2"))
];

/* أماكن الزر */
const buttonPositions = [
  {top:"50%", left:"49%", width:"5%", height:"5%"},
  {top:"20%", left:"27%", width:"15%", height:"25%"},
  {top:"11%", left:"55%", width:"15%", height:"25%"},
  {top:"25%", left:"35%", width:"10%", height:"30%"},
  {top:"50%", left:"63%", width:"5%", height:"10%"},
  {top:"20%", left:"39%", width:"3%", height:"20%"},
  {top:"50%", left:"50%", width:"5%", height:"5%"}
];

/* تشغيل المرحلة */
startBtn.onclick = () => {
  welcome.style.display = "none";
  questionBar.style.display = "flex";
  statusBar.style.display = "flex";
  playVideo();
};

/* تشغيل الفيديو */
function playVideo() {
  const videos = phases[currentPhase];
  videos.forEach(v => { v.pause(); v.style.display="none"; });

  const vid = videos[currentVideoIndex];
  vid.style.display = "block";
  vid.play();

  phaseEnded = false;
  updateStatus();
}

/* تحديث الحالة */
function updateStatus() {
  statusEl.textContent = `case ${currentPhase+1}`;
  pointsEl.textContent = totalPoints;
}

/* عند انتهاء الفيديو */
phases.forEach((phaseVideos)=>{
  phaseVideos.forEach((video,vIndex)=>{

    video.addEventListener("ended", ()=>{

      const pos = buttonPositions[vIndex];
      nextBtn.style.top = pos.top;
      nextBtn.style.left = pos.left;
      nextBtn.style.width = pos.width;
      nextBtn.style.height = pos.height;

      /* ✨ شكل الزر الجديد */
      nextBtn.style.backgroundColor = "rgba(255,255,255,0.55)";
      nextBtn.style.backdropFilter = "blur(4px)";
      nextBtn.style.webkitBackdropFilter = "blur(4px)";
      nextBtn.style.border = "1px solid rgba(255,255,255,0.35)";
      nextBtn.style.boxShadow = "0 0 8px rgba(255,255,255,0.35)";
      nextBtn.style.display = "block";

      phaseEnded = true;
    });
  });
});

/* زر التالي */
nextBtn.onclick = () => {
  nextBtn.style.display = "none";
  currentVideoIndex++;
  playVideo();
};

/* سؤال نعم/لا */
yesBtn.onclick = noBtn.onclick = ()=> {
  alertMsg.textContent = "Correct!";
  alertBox.style.display = "flex";
};

alertBtn.onclick = ()=>{
  alertBox.style.display = "none";
  currentPhase++;
  if (currentPhase < phases.length){
    currentVideoIndex = 0;
    playVideo();
  } else {
    alertMsg.textContent = "All cases completed!";
    alertBtn.style.display = "none";
    alertBox.style.display = "flex";
  }
};
</script>

</body>
</html>
